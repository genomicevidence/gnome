<ul class="breadcrumb">
  <li><%= link_to "My Projects", projects_path %> <span class="divider">/</span></li>
  <li><%= link_to @genome.dataset.project.title, @genome.dataset.project %> <span class="divider">/</span></li>
  <li class="active"><%= @genome.file_name %></li>
</ul>

<div class="row">
  <div class="span12 colums">
    <h1><%= @genome.file_name %> (<%= @genome.dataset.category %>)</h1>
    
  </div>
  <div class="span4 colums">
    <%= form_tag(genomes_path, :method => :get, :id => "genome_selector") do %>
      <%= label("genome", "id", "Genomes") %>
      <%= select("genome", "id", grouped_options_for_select(@grouped_genomes, @genome.id)) %>
    <% end %>
  </div>
</div>

<%= form_tag(@genome, :method => :get, :id => "variant_filter") do %>
<div class="row">
  <div class="span4 colums">
    <%= label("variant", "gene_model") %>
    <%= select("variant", "gene_model", [["RefSeq", "r"], ["CCDS", "c"], ["Ensembl", "e"], ["UCSC known gene", "u"]], {
  :selected => params[:variant].present? ? params[:variant][:gene_model] : "refGene" }, :class => "span4") %>
  </div>
  <div class="span4 colums">
    <%= label("variant", "ancestry") %>
      <%= select("variant", "ancestry", [["European", "european"], ["Asian", "asian"], ["African", "african"]], { :selected => (params[:variant].present? and params[:variant][:ancestry].present?) ? params[:variant][:ancestry] : "European" })%>
  </div>
  <div class="span4 colums">
    <%= label("variant", "allele_frequency", "Allele Frequency")%>
    <%= select("variant", "allele_frequency", [["novel", "n"], ["rare (< 1%)", "r"], ["less common (< 5%)", "l"], ["common (>= 5%)", "c"]], { :selected => (params[:variant].present? and params[:variant][:allele_frequency].present?) ? params[:variant][:allele_frequency] : "n" })%>
  </div>
  <div class="span4 colums">
    <%= label("variant", "impact") %>
    <%= select("variant", "impact", ["nonsynonymous", "synonymous", "any"], { :selected => (params[:variant].present? and params[:variant][:impact].present?) ? params[:variant][:impact] : "nonsynonymous" }) %>
  </div>
</div>

<div class="row">
  <div class="span4 colums">
    <%= label("variant", "gene_component", "Gene Component") %>
    <%= select("variant", "gene_component", @genome.summaries.select{|s| s.category == "gene_component"}.map(&:item).uniq, {
  :include_blank => true, :selected => (params[:variant].present? and params[:variant][:gene_component].present?) ? params[:variant][:gene_component] : nil}) %>
  </div>
  <div class="span4 colums">
    <%= label("variant", "PPH2_pred", "PPH2 Prediction") %>
    <%= select("variant", "PPH2_pred", ["deleterious", "neutral"], {
  :include_blank => true, :selected => (params[:variant].present? and params[:variant][:PPH2_pred].present?) ? params[:variant][:PPH2_pred] : nil }) %>
  </div>
  <div class="span4 colums">
    <%= label("variant", "SIFT_pred", "SIFT Prediction") %>
    <%= select("variant", "SIFT_pred", ["deleterious", "neutral"], {
  :include_blank => true, :selected => (params[:variant].present? and params[:variant][:SIFT_pred].present?) ? params[:variant][:SIFT_pred] : nil }) %>
  </div>
  <div class="span4 colums">
    <%= label("variant", "Condel_pred", "Condel Prediction") %>
    <%= select("variant", "Condel_pred", ["deleterious", "neutral"], {
  :include_blank => true, :selected => params[:variant].present? ? params[:variant][:Condel_pred] : nil }) %>
  </div>
</div>

<!--div class="row">
  <div class="span4 colums">
    <%= label("variant", "Genotype", "Genotype")%>
    <%= select("variant", "Genotype", [])%>
  </div>
  <div class="span4 colums">
    <%= label("variant", "score", "Variant Call Score")%>
    <%= select("variant", "score", [["> 20", 20], ["> 40", 40], ["> 60", 60], ["> 80", 80], ["> 100", 100]], {
  :include_blank => true, :selected => params[:variant].present? ? params[:variant][:SIFT_pred] : nil })%>
  </div>
  <div class="span4 colums">
    <%= label("variant", "Average_conservation_score", "GERP")%>
    <%= select("variant", "Average_conservation_score", [["> 2", 2], ["> 3", 3], ["> 4", 4], ["> 5", 5]])%>
  </div>
  <div class="span4 colums">
    <%= label("variant", "Portion_with_sequence_repeat", "RMSK")%>
    <%= select("variant", "Portion_with_sequence_repeat", [])%>
  </div>
</div-->
<% end %>

<h2><%= pluralize(@transcripts.size, "Gene")%></h2>
<table class="zebra-striped">
  <tr>
    <th>Chromosome</th>
    <th>Symbol</th>
    <th>Transcript ID</th>
    <th class="number">Variants Count</th>
  </tr>
  <% if @transcripts.present? %>
    <% @transcripts.each do |t| %>
  <tr>
    <td><%= t[0].chromosome %></td>
    <td><%= t[0].gene_symbol %></td>
    <td><%= t[0].transcript_ID %></td>
    <td class="number"><%= t[1] %></td>
  </tr>
    <% end %>
  <% end %>
</table>
